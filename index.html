<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPILL</title>
    <style>
        /* Previous styles remain... */

        /* Fix trending sidebar scrolling */
        .trending-sidebar {
            max-height: calc(100vh - 160px);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) var(--secondary);
        }

        .trending-sidebar::-webkit-scrollbar {
            width: 8px;
        }

        .trending-sidebar::-webkit-scrollbar-track {
            background: var(--secondary);
        }

        .trending-sidebar::-webkit-scrollbar-thumb {
            background-color: var(--primary);
            border-radius: 4px;
        }

        /* Weather widget styles */
        .weather-widget {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--secondary);
            border-radius: 8px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .weather-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .weather-temp {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text);
        }

        .local-time {
            font-size: 1rem;
            color: var(--text);
            margin-top: 4px;
        }

        @media (max-width: 768px) {
            .weather-widget {
                position: static;
                margin: 10px 20px;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/" class="logo">SPILL</a>
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Search articles...">
            </div>
            <div class="weather-widget">
                <div class="weather-info">
                    <div class="weather-temp" id="weatherTemp">Loading...</div>
                    <div class="local-time" id="localTime"></div>
                </div>
            </div>
        </div>
    </header>

    <!-- Rest of the HTML remains the same... -->

    <script>
        // Update local time
        function updateTime() {
            const timeElem = document.getElementById('localTime');
            const now = new Date();
            timeElem.textContent = now.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
        }

        // Update weather
        async function updateWeather() {
            try {
                // Get user's location
                const pos = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject);
                });

                // Fetch weather data
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?` +
                    `latitude=${pos.coords.latitude}&` +
                    `longitude=${pos.coords.longitude}&` +
                    `current_weather=true&temperature_unit=fahrenheit`
                );

                const data = await response.json();
                const temp = Math.round(data.current_weather.temperature);
                
                // Update weather display
                const weatherElem = document.getElementById('weatherTemp');
                weatherElem.textContent = `${temp}Â°F`;
            } catch (error) {
                console.error('Error fetching weather:', error);
                const weatherElem = document.getElementById('weatherTemp');
                weatherElem.textContent = 'Weather unavailable';
            }
        }

        // Initialize time and weather
        updateTime();
        setInterval(updateTime, 60000); // Update time every minute
        updateWeather();
        setInterval(updateWeather, 900000); // Update weather every 15 minutes
    </script>
    
    <script src="trend-analyzer.js"></script>
    <script src="app.js"></script>
</body>
</html>